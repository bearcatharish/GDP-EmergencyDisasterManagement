var winston = require('winston');
require('./index');

var fileTransportOpts = {
  filename: './server',
  datePattern: '.log',
  maxsize: 100,
  maxFiles: 2
};

var logger = new (winston.Logger)({
  transports: [
    new (winston.transports.DailyRotateFile)(fileTransportOpts)
  ]
});

for (var i = 0; i < 100000; i++) {
  setTimeout(function (counter) {
    logger.log('info', counter.toString() + ': Hello created log files!', {}, function (err, logged) {
      if (err) {
        console.log('ERR: ', err);
      }
      console.log(counter.toString() + ': ' + logged);
    });
  }, 250, i);
}
